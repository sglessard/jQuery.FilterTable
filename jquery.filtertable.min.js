/**
 * jquery.filterTable
 *
 * This plugin will add a search filter to tables. When typing in the filter,
 * any rows that do not contain the filter will be hidden.
 *
 * Utilizes bindWithDelay() if available. https://github.com/bgrins/bindWithDelay
 *
 * @version v1.5
 * @author Sunny Walker, swalker@hawaii.edu
 */(function(e){var t=e.fn.jquery.split("."),n=parseFloat(t[0]),r=parseFloat(t[1]);if(n<2&&r<8){e.expr[":"].filterTableFind=function(t,n,r){return e(t).text().toUpperCase().indexOf(r[3].toUpperCase())>=0}}else{e.expr[":"].filterTableFind=jQuery.expr.createPseudo(function(t){return function(n){return e(n).text().toUpperCase().indexOf(t.toUpperCase())>=0}})}e.fn.filterTable=function(t){var n={callback:null,containerClass:"filter-table",containerTag:"p",hideTFootOnFilter:false,highlightClass:"alt",inputName:"",inputType:"search",label:"Filter:",minRows:8,placeholder:"search this table",quickList:[],quickListClass:"quick",quickListGroupTag:"",quickListTag:"a",visibleClass:"visible",filterElementIds:[]},r=function(e){return e.replace(/&/g,"&").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},i=e.extend({},n,t);var s=function(t,n,r){var s=t.find("tbody");if(n===""){s.find("tr").show().addClass(i.visibleClass);s.find("td").removeClass(i.highlightClass);if(i.hideTFootOnFilter){t.find("tfoot").show()}}else{s.find("tr").hide().removeClass(i.visibleClass);if(i.hideTFootOnFilter){t.find("tfoot").hide()}var o="td";if(typeof r!="undefined"&&e("th."+r).length>0){var u=e("th."+r).get(0).cellIndex+1;o+=":nth-child("+u+")"}s.find("td").removeClass(i.highlightClass);s.find(o).filter(':filterTableFind("'+n.replace(/(['"])/g,"\\$1")+'")').addClass(i.highlightClass).closest("tr").show().addClass(i.visibleClass)}if(i.callback){i.callback(n,t)}};var o=function(t){e.each(i.filterElementIds,function(n,r){if(r!=t)e(r).val("")})};return this.each(function(){var t=e(this),n=t.find("tbody"),u=null,a=null,f=null;if(t[0].nodeName==="TABLE"&&n.length>0&&(i.minRows===0||i.minRows>0&&n.find("tr").length>i.minRows)&&!t.prev().hasClass(i.containerClass)){u=e("<"+i.containerTag+" />");if(i.containerClass!==""){u.addClass(i.containerClass)}u.prepend(i.label+" ");if(i.filterElementIds.length<1){f=e('<input type="'+i.inputType+'" placeholder="'+i.placeholder+'" name="'+i.inputName+'" id="jft-'+i.inputName+'" />');i.filterElementIds=["#jft-"+i.inputName];u.append(f);t.before(u)}e.each(i.filterElementIds,function(n,r){f=e(r);if(f.length<1)return true;if(f.get(0).tagName=="INPUT"){if(e.fn.bindWithDelay){f.bindWithDelay("keyup",function(){s(t,e(this).val())},200)}else{f.bind("keyup",function(){s(t,e(this).val())})}f.bind("click search",function(){o(r);s(t,e(this).val())})}else if(f.get(0).tagName=="SELECT"){f.change(function(){o(r);s(t,e(this).val(),e(this).attr("id"))})}});if(i.quickList.length>0){a=i.quickListGroupTag?e("<"+i.quickListGroupTag+" />"):u;e.each(i.quickList,function(t,n){var s=e("<"+i.quickListTag+' class="'+i.quickListClass+'" />');s.text(r(n));if(s[0].nodeName==="A"){s.attr("href","#")}s.bind("click",function(e){e.preventDefault();f.val(n).focus().trigger("click")});a.append(s)});if(a!==u){u.append(a)}}}})}})(jQuery);